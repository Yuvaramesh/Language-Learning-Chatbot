<?xml version="1.0" encoding="UTF-8" standalone="no"?>
<svg width="800" height="500" xmlns="http://www.w3.org/2000/svg">
    <!-- Background -->
    <rect width="800" height="500" fill="#2a3039" />
    
    <!-- Title -->
    <text x="400" y="40" font-family="Arial" font-size="24" fill="#ffffff" text-anchor="middle" font-weight="bold">Data Flow Diagram</text>
    
    <!-- User Entity -->
    <rect x="40" y="170" width="120" height="60" rx="8" ry="8" fill="#3b5998" stroke="#ffffff" stroke-width="2" />
    <text x="100" y="205" font-family="Arial" font-size="16" fill="#ffffff" text-anchor="middle" font-weight="bold">User</text>
    
    <!-- Web Interface Process -->
    <circle cx="240" cy="200" r="50" fill="#0f9d58" stroke="#ffffff" stroke-width="2" />
    <text x="240" y="195" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Web</text>
    <text x="240" y="215" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Interface</text>
    
    <!-- Core Logic Process -->
    <circle cx="400" cy="200" r="50" fill="#0f9d58" stroke="#ffffff" stroke-width="2" />
    <text x="400" y="195" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Core App</text>
    <text x="400" y="215" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Logic</text>
    
    <!-- OpenAI Service -->
    <circle cx="560" cy="200" r="50" fill="#db4437" stroke="#ffffff" stroke-width="2" />
    <text x="560" y="195" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">OpenAI</text>
    <text x="560" y="215" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Service</text>
    
    <!-- Database -->
    <rect x="340" y="340" width="120" height="60" fill="#4285f4" stroke="#ffffff" stroke-width="2" rx="5" ry="5" />
    <rect x="340" y="320" width="120" height="20" fill="#4285f4" stroke="#ffffff" stroke-width="2" rx="5" ry="5" />
    <text x="400" y="335" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">PostgreSQL</text>
    <text x="400" y="375" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle">Database</text>
    
    <!-- Flow Arrows -->
    
    <!-- User to Web Interface -->
    <line x1="160" y1="190" x2="190" y2="190" stroke="#ffffff" stroke-width="2" />
    <polygon points="180,185 190,190 180,195" fill="#ffffff" />
    <text x="175" y="180" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">1. Input</text>
    
    <!-- Web Interface to User -->
    <line x1="190" y1="210" x2="160" y2="210" stroke="#ffffff" stroke-width="2" />
    <polygon points="170,205 160,210 170,215" fill="#ffffff" />
    <text x="175" y="230" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">8. Display</text>
    
    <!-- Web Interface to Core Logic -->
    <line x1="290" y1="190" x2="350" y2="190" stroke="#ffffff" stroke-width="2" />
    <polygon points="340,185 350,190 340,195" fill="#ffffff" />
    <text x="320" y="180" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">2. Request</text>
    
    <!-- Core Logic to Web Interface -->
    <line x1="350" y1="210" x2="290" y2="210" stroke="#ffffff" stroke-width="2" />
    <polygon points="300,205 290,210 300,215" fill="#ffffff" />
    <text x="320" y="230" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">7. Response</text>
    
    <!-- Core Logic to OpenAI -->
    <line x1="450" y1="190" x2="510" y2="190" stroke="#ffffff" stroke-width="2" />
    <polygon points="500,185 510,190 500,195" fill="#ffffff" />
    <text x="480" y="180" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">3. API Request</text>
    
    <!-- OpenAI to Core Logic -->
    <line x1="510" y1="210" x2="450" y2="210" stroke="#ffffff" stroke-width="2" />
    <polygon points="460,205 450,210 460,215" fill="#ffffff" />
    <text x="480" y="230" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">4. AI Response</text>
    
    <!-- Core Logic to Database (Save) -->
    <line x1="385" y1="250" x2="385" y2="320" stroke="#ffffff" stroke-width="2" />
    <polygon points="380,310 385,320 390,310" fill="#ffffff" />
    <text x="365" y="290" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">5. Save</text>
    
    <!-- Database to Core Logic (Retrieve) -->
    <line x1="415" y1="320" x2="415" y2="250" stroke="#ffffff" stroke-width="2" />
    <polygon points="410,260 415,250 420,260" fill="#ffffff" />
    <text x="435" y="290" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="middle">6. Retrieve</text>
    
    <!-- Descriptions -->
    <rect x="590" y="340" width="180" height="140" rx="8" ry="8" fill="rgba(255, 255, 255, 0.1)" stroke="#ffffff" stroke-width="1" />
    <text x="680" y="365" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle" font-weight="bold">Data Flow Steps</text>
    
    <text x="600" y="390" font-family="Arial" font-size="12" fill="#ffffff">1. User enters message</text>
    <text x="600" y="410" font-family="Arial" font-size="12" fill="#ffffff">2. Message sent to backend</text>
    <text x="600" y="430" font-family="Arial" font-size="12" fill="#ffffff">3-4. AI processes message</text>
    <text x="600" y="450" font-family="Arial" font-size="12" fill="#ffffff">5-6. Data persistence</text>
    <text x="600" y="470" font-family="Arial" font-size="12" fill="#ffffff">7-8. Response to user</text>
    
    <!-- Legend -->
    <rect x="40" y="340" width="120" height="140" rx="8" ry="8" fill="rgba(255, 255, 255, 0.1)" stroke="#ffffff" stroke-width="1" />
    <text x="100" y="365" font-family="Arial" font-size="14" fill="#ffffff" text-anchor="middle" font-weight="bold">Legend</text>
    
    <rect x="50" y="380" width="20" height="15" fill="#3b5998" />
    <text x="75" y="392" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="start">External Entity</text>
    
    <circle cx="60" cy="415" r="10" fill="#0f9d58" />
    <text x="75" y="419" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="start">Process</text>
    
    <circle cx="60" cy="440" r="10" fill="#db4437" />
    <text x="75" y="444" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="start">External Service</text>
    
    <rect x="50" y="455" width="20" height="15" fill="#4285f4" />
    <text x="75" y="467" font-family="Arial" font-size="12" fill="#ffffff" text-anchor="start">Data Store</text>
</svg>